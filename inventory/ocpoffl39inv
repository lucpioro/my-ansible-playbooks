#reduction du nombre de noeuds pour accelerer les tests

[localhost]
localhost ansible_connection=local

[OSEv3:vars]

# -- Ansible configuration

ansible_connection=ssh
ansible_port=22
ansible_ssh_user=root
#ansible_user=svcdocker
ansible_become=false
#ansible_timeout = 15


# -- Installation configuration

openshift_deployment_type=openshift-enterprise
debug_level=2
openshift_image_tag=v3.9.41

# -- External Docker Registry

#openshift_docker_additional_registries=['picnex000.dom101.mapres:8082']
#openshift_docker_insecure_registries=['picnex000.dom101.mapres:8082']
#openshift_docker_blocked_registries=docker.io,registry.access.redhat.com
#oreg_url=picnex000.dom101.mapres:8082/openshift3/ose-${component}:${version}
#oreg_auth_user='virtu'
#oreg_auth_password='password'
#oreg_auth_credentials_replace=True
openshift_examples_modify_imagestreams=true

# -- Cluster configuration

openshift_master_cluster_public_hostname=openshift2.bizotdc.tech
openshift_master_cluster_hostname=openshift2.bizotdc.tech
openshift_master_default_subdomain=cloudapps.bizotdc.tech
openshift_master_api_port=443
openshift_master_console_port=443

# -- SDN configuration

os_sdn_network_plugin_name=redhat/openshift-ovs-multitenant

# -- Certificate configuration

# openshift_master_named_certificates=[{"certfile": "/opt/share/InstallOpenShift/certificate/maquette/zone/caas.maq.intra.bpce-it.fr.crt", "keyfile": "/opt/share/InstallOpenShift/certificate/maquette/zone/caas.maq.intra.bpce-it.fr.private.key", "cafile": "/opt/share/InstallOpenShift/certificate/maquette/racine/ca.cer"}]

# -- Identity Providers

openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]

#openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}, {'name': 'ldap_auth', 'login': 'true', 'challenge': 'true', 'kind': 'LDAPPasswordIdentityProvider', 'attributes': {'id': ['userPrincipalName'], 'name': ['name']}, 'bindDN': '{{ ldapUser }}', 'insecure': 'true', 'bindPassword': '{{ ldapPassword }}', 'url': 'ldap://100.123.216.24/ou=administration,DC=dom000,DC=intrec??sub?(&(objectclass=user)(uidNumber=*))'}]

# -- Service Catalog configuration

#openshift_service_catalog_image_prefix=picnex000.dom101.mapres:8082/openshift3/
#openshift_service_catalog_image_version=v3.9.41


# -- Registry Console - Cockpit configuration

openshift_cockpit_deployer_prefix=picnex000.dom101.mapres:8082/openshift3/
openshift_cockpit_deployer_version=v3.9.41

# -- Router configuration

openshift_router_selector='region=infra'

# -- Applications par defaut sur les nodes app --

osm_default_node_selector='region=app'

# -- Metrics configuration

#STEP2:openshift_metrics_install_metrics=true
#STEP2:openshift_metrics_hawkular_hostname=hawkular-metrics.cloudapps.maq.intra.bpce-it.fr
#STEP2:openshift_metrics_image_prefix=picnex000.dom101.mapres:8082/openshift3/
#STEP2:openshift_metrics_image_version=v3.9
#STEP2:openshift_metrics_cassandra_nodeselector={"target":"metrics"}
#STEP2:openshift_metrics_hawkular_nodeselector={"target":"metrics"}
#STEP2:openshift_metrics_heapster_nodeselector={"target":"metrics"}
##openshift_metrics_storage_access_modes=['ReadWriteOnce']
#STEP2:openshift_metrics_cassandra_pvc_size=50Gi
#STEP2:openshift_metrics_cassandra_storage_type=pv
#STEP2:openshift_metrics_storage_labels={'name':'metrics'}

# -- Logging configuration

#STEP2:openshift_logging_install_logging=true
#STEP2:openshift_logging_image_prefix=picnex000.dom101.mapres:8082/openshift3/
#STEP2:openshift_logging_image_version=v3.9.41
#STEP2:openshift_logging_master_public_url=https://caas.maq.intra.bpce-it.fr
#STEP2:openshift_logging_master_url=https://caas.dom101.mapres
#STEP2:openshift_logging_curator_nodeselector={"target":"metrics"}
#STEP2:openshift_logging_kibana_nodeselector={"target":"metrics"}
#STEP2:openshift_logging_es_nodeselector={"target":"metrics"}
#STEP2:openshift_logging_es_pvc_storage_class_name="''"
#STEP2:#openshift_logging_es_pvc_storage_class_name=volumeprovisionning
#STEP2:openshift_logging_es_pvc_dynamic=false
#STEP2:openshift_logging_es_pv_selector={"name":"logs"}
#
#STEP2:openshift_logging_use_ops=true
#STEP2:openshift_logging_es_ops_pvc_dynamic=false
#STEP2:openshift_logging_es_ops_pvc_storage_class_name=volumeprovisionning
#STEP2:#openshift_logging_es_ops_pvc_storage_class_name="''"
#STEP2:openshift_logging_es_ops_pv_selector={"name":"logs-ops"}
#STEP2:openshift_logging_es_ops_nodeselector={"target":"metrics"}
#STEP2:openshift_logging_elasticsearch_storage_type=pvc
#STEP2:openshift_logging_elasticsearch_pvc_size=10Gi

# Not using NFS for storage, see https://docs.openshift.com/container-platform/3.7/install_config/aggregate_logging.html#aggregated-elasticsearch

# -- Service catalog configuration

openshift_enable_service_catalog=false

[OSEv3:children]
masters
nodes
etcd
lb

[etcd:children]
masters

[masters]
openshiftm1.bizotdc.tech

[nodes:children]
nodes-infra
nodes-app
nodes-master

[nodes-master]
openshiftm1.bizotdc.tech

[nodes-infra]
openshifti1.bizotdc.tech openshift_node_labels="{'region': 'infra'}"

[nodes-app]
openshiftn1.bizotdc.tech openshift_node_labels="{'region': 'app'}"

[lb]
openshiftlb.bizotdc.tech
